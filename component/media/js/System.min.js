/*
 @package   AkeebaReleaseSystem
 @copyright Copyright (c)2010-2021 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.System&&(akeeba.System={},akeeba.System.documentReady=function(a,c){},akeeba.System.notification={hasDesktopNotification:!1,iconURL:""},akeeba.System.params={AjaxURL:"",useIFrame:!1,errorCallback:akeeba.System.modalErrorHandler,iFrame:null,iFrameCallbackError:null,iFrameCallbackSuccess:null,password:"",errorDialogId:"errorDialog",errorDialogMessageId:"errorDialogPre"},akeeba.System.modalDialog=null);
akeeba.System.defaultErrorHandler=function(a){alert("An error has occurred\n"+a)};akeeba.System.modalErrorHandler=function(a){var c=document.getElementById(akeeba.System.params.errorDialogId),b="error";null!=c&&(document.getElementById(akeeba.System.params.errorDialogMessageId).innerHTML=a,b=c.innerHTML);akeeba.Modal.open({content:b,width:"80%"})};akeeba.System.params.errorCallback=akeeba.System.modalErrorHandler;
akeeba.System.doIframeCall=function(a,c,b){akeeba.System.params.iFrameCallbackSuccess=c;akeeba.System.params.iFrameCallbackError=b;akeeba.System.params.iFrame=document.createElement("iframe");document.getElementById("response-timer");akeeba.System.params.iFrame.style.display="none";akeeba.System.params.iFrame.style.visibility="hidden";akeeba.System.params.iFrame.style.height="1px";akeeba.System.params.iFrame.setAttribute("onload",akeeba.System.iframeCallback);a=akeeba.System.params.AjaxURL+"&"+akeeba.Ajax.interpolateParameters(a);
akeeba.System.params.iFrame.setAttribute("src",a)};
akeeba.System.iframeCallback=function(){var a=(akeeba.System.params.iFrame.contentDocument?akeeba.System.params.iFrame.contentDocument:akeeba.System.params.iFrame.contentWindow.document).body.innerHTML;akeeba.System.params.iFrame.parentNode.removeChild(akeeba.System.params.iFrame);akeeba.System.params.iFrame=null;var c=a.indexOf("###");if(-1==c)a="Invalid AJAX data: "+a,null==akeeba.System.params.iFrameCallbackError?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(a):akeeba.System.params.iFrameCallbackError(a);
else{0!=c&&(a.substr(0,c),a=a.substr(c));a=a.substr(3);c=a.lastIndexOf("###");a=a.substr(0,c);try{var b=JSON.parse(a)}catch(f){a=f.message+"\n<br/>\n<pre>\n"+a+"\n</pre>";null==akeeba.System.params.iFrameCallbackError?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(a):akeeba.System.params.iFrameCallbackError(a);return}akeeba.System.params.iFrameCallbackSuccess(b)}};
akeeba.System.doAjax=function(a,c,b,f,e){if(akeeba.System.params.useIFrame)akeeba.System.doIframeCall(a,c,b);else{null==f&&(f=!0);var g=(new Date).getTime()/1E3,l=parseInt(g,10);a._cacheBustingJunk=Math.round(1E3*(g-l))/1E3;null==e&&(e=6E5);a={type:"POST",url:akeeba.System.params.AjaxURL,cache:!1,data:a,timeout:e,success:function(d){var h=d.indexOf("###");if(-1==h)d=akeeba.System.sanitizeErrorMessage(d),d="Invalid AJAX data: "+d,null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(d):
b(d);else{0!=h&&(d.substr(0,h),d=d.substr(h));d=d.substr(3);h=d.lastIndexOf("###");d=d.substr(0,h);try{var m=JSON.parse(d)}catch(k){d=akeeba.System.sanitizeErrorMessage(d);d=k.message+"\n<br/>\n<pre>\n"+d+"\n</pre>";null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(d):b(d);return}c(m)}},error:function(d,h,m){m=d.responseText?d.responseText:"";var k="<strong>AJAX Loading Error</strong><br/>HTTP Status: "+d.status+" ("+d.statusText+")<br/>";k=k+"Internal status: "+
h+"<br/>XHR ReadyState: "+d.readyState+"<br/>";k=k+"Raw server response:<br/>"+akeeba.System.sanitizeErrorMessage(m);null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(k):b(k)}};f?akeeba.Ajax.enqueue(a):akeeba.Ajax.ajax(a)}};akeeba.System.sanitizeErrorMessage=function(a){-1<a.indexOf("<script")&&(a="(HTML containing script tags)");return a};
akeeba.System.notification.askPermission=function(){akeeba.System.notification.hasDesktopNotification&&void 0!=window.Notification&&"default"==window.Notification.permission&&window.Notification.requestPermission()};
akeeba.System.notification.notify=function(a,c,b){void 0!=window.Notification&&"granted"==window.Notification.permission&&(void 0==b&&(b=5E3),void 0==c&&(body=""),a=new window.Notification(a,{body:c,icon:akeeba.System.notification.iconURL}),0<b&&setTimeout(function(f){return function(){f.close()}}(a),b))};
akeeba.System.data=function(){var a=0,c={};return{set:function(b,f,e){if(b.dataset)b.dataset[f]=e,null==e&&delete b.dataset[f];else{if(void 0===b.myCustomDataTag){var g=a++;b.myCustomDataTag=g}"undefined"==typeof c[g]&&(c[g]={});c[g][f]=e;var l="data-"+f.split(/(?=[A-Z])/).join("-").toLowerCase();b.setAttribute&&b.setAttribute(l,e);if(null==e)try{delete c[g][f],b.removeAttribute(l)}catch(d){c[g][f]=null}}},get:function(b,f,e){if(b.dataset)return"undefined"==typeof b.dataset[f]&&(b.dataset[f]=e),b.dataset[f];
"undefined"==typeof e&&(e=null);"undefined"==typeof c[b.myCustomDataTag]&&(c[b.myCustomDataTag]={});var g="data-"+f.split(/(?=[A-Z])/).join("-").toLowerCase();"undefined"!==typeof b[g]&&(c[b.myCustomDataTag][f]=b[g]);"undefined"==typeof c[b.myCustomDataTag][f]&&this.set(b,f,e);return c[b.myCustomDataTag][f]}}}();
akeeba.System.addEventListener=function(a,c,b){function f(e){var g=b.apply(this,arguments);!1===g&&(e.stopPropagation()&&e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1);return g}"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.addEventListener?a.addEventListener(c,f,!1):a.attachEvent("on"+c,function(){var e=b.call(a,window.event);!1===e&&(window.event.returnValue=!1,window.event.cancelBubble=!0);return e}))};
akeeba.System.removeEventListener=function(a,c,b){"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.removeEventListener?a.removeEventListener(c,b):a.detachEvent("on"+c,b))};
akeeba.System.triggerEvent=function(a,c){if("undefined"!=typeof a&&null!==a&&("string"===typeof a&&(a=document.getElementById(a)),"object"==typeof a&&a instanceof Element))if("function"===typeof window.jQuery)window.jQuery(a).trigger(c);else if(document.fireEvent&&"undefined"==typeof window.Event)a.fireEvent("on"+c);else{var b=document.createEvent("Event");b.initEvent(c,!0,!0);a.dispatchEvent(b)}};
(function(a,c){function b(){if(!g){g=!0;for(var d=0;d<e.length;d++)e[d].fn.call(window,e[d].ctx);e=[]}}function f(){"complete"===document.readyState&&b()}c=c||akeeba.System;var e=[],g=!1,l=!1;c[a||"documentReady"]=function(d,h){g?setTimeout(function(){d(h)},1):(e.push({fn:d,ctx:h}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(b,1):l||(l=!0,document.addEventListener?(document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",
b,!1)):(document.attachEvent("onreadystatechange",f),window.attachEvent("onload",b))))}})("documentReady",akeeba.System);akeeba.System.addClass=function(a,c){if(a&&a.className){var b=a.className.split(" ");"string"==typeof c&&(c=c.split(" "));b=array_merge(b,c);a.className="";for(property in b)b.hasOwnProperty(property)&&(a.className+=b[property]+" ");a.className.trim&&(a.className=a.className.trim())}};
akeeba.System.removeClass=function(a,c){if(a&&a.className){var b=a.className.split(" ");"string"==typeof c&&(c=c.split(" "));b=array_diff(b,c);a.className="";for(property in b)b.hasOwnProperty(property)&&(a.className+=b[property]+" ");a.className.trim&&(a.className=a.className.trim())}};akeeba.System.hasClass=function(a,c){if(a&&a.className){a=a.className.split(" ");for(i=0;i<a.length;i++)if(a[i]==c)return!0;return!1}};
akeeba.System.toggleClass=function(a,c){akeeba.System.hasClass(a,c)?akeeba.System.removeClass(a,c):akeeba.System.addClass(a,c)};
