{"version":3,"file":"Items.min.js","names":["akeeba","arsItems","populateFiles","forceSelected","itemID","Joomla","getOptions","releaseID","document","getElementById","value","selected","token","request","url","method","perform","onSuccess","data","elFilename","innerHTML","removeAttribute","onFileChange","onLinkBlur","elAlias","oldAlias","newAlias","basename","qmPos","indexOf","substr","replace","window","addEventListener"],"sources":["Items.js"],"sourcesContent":["/**\n * @package   AkeebaReleaseSystem\n * @copyright Copyright (c)2010-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\"use strict\";\n\n/**\n * JavaScript for backend Items view\n */\n\nif (typeof (akeeba) == \"undefined\")\n{\n    var akeeba = {};\n}\n\nvar arsItems = {};\n\narsItems.populateFiles = function (forceSelected) {\n    var itemID    = Joomla.getOptions(\"ars.item_id\", \"\");\n    var releaseID = document.getElementById(\"jform_release_id\").value;\n    var selected  = document.getElementById(\"jform_filename\").value;\n    var token     = Joomla.getOptions(\"csrf.token\", \"\");\n\n    if (forceSelected)\n    {\n        selected = forceSelected;\n    }\n\n    Joomla.request({\n        url:       `index.php?option=com_ars&view=ajax&format=raw&task=getFiles&item_id=${itemID}&release_id=${releaseID}&selected=${selected}&${token}=1`,\n        method:    \"GET\",\n        perform:   true,\n        onSuccess: data =>\n                   {\n                       let elFilename = document.getElementById(\"jform_filename\");\n\n                       elFilename.innerHTML = data;\n                       elFilename.removeAttribute(\"disabled\");\n\n                       arsItems.onFileChange();\n                   }\n    });\n};\n\narsItems.onLinkBlur = function (e)\n{\n    var elAlias  = document.getElementById(\"jform_alias\");\n    var oldAlias = elAlias.value;\n\n    if (oldAlias !== \"\")\n    {\n        return;\n    }\n\n    var newAlias = basename(document.getElementById(\"jform_url\").value);\n    var qmPos    = newAlias.indexOf(\"?\");\n\n    if (qmPos >= 0)\n    {\n        newAlias = newAlias.substr(0, qmPos);\n    }\n\n    newAlias = newAlias.replace(\" \", \"-\", \"g\");\n\n    elAlias.value = newAlias;\n};\n\narsItems.onFileChange = function (e)\n{\n    var elAlias  = document.getElementById(\"jform_alias\");\n    var oldAlias = elAlias.value;\n\n    if (oldAlias !== \"\")\n    {\n        return;\n    }\n\n    var newAlias = basename(document.getElementById(\"jform_filename\").value);\n    newAlias     = newAlias.replace(\" \", \"-\", \"g\");\n\n    elAlias.value = newAlias;\n};\n\nwindow.addEventListener(\"DOMContentLoaded\", function ()\n{\n    document.getElementById(\"jform_url\").addEventListener(\"focus\", arsItems.onLinkBlur);\n    document.getElementById(\"jform_filename\").addEventListener(\"change\", arsItems.onFileChange);\n    document.getElementById(\"jform_type\").addEventListener(\"change\", function (e)\n    {\n        if (document.getElementById(\"jform_type\").value === \"file\")\n        {\n            arsItems.populateFiles();\n        }\n    });\n\n    arsItems.populateFiles(Joomla.getOptions(\"ars.item_filename\", \"\"));\n});\n"],"mappings":"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"}